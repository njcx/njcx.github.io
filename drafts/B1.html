<!DOCTYPE html>
<html lang="zh">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="google-site-verification" content="GgupatpoZgdqsBlxEZoMqGAy3aXAFtXIrYged3SB6EA" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Linux 运维常用命令总结 | nJcx's Blog
</title>
  <link rel="canonical" href="https://www.njcx.bid/drafts/B1.html">


  <link rel="apple-touch-icon" href="https://www.njcx.bid/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://www.njcx.bid/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://www.njcx.bid/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://www.njcx.bid/manifest.json">
  <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/pygments/emacs.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/style.css">


<meta name="description" content="Linux 运维常用命令总结">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a34c7a96ae9745547c373575407c521f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <a href="https://www.njcx.bid">
            <img class="img-fluid" src=https://www.njcx.bid/images/profile.png width=200 height=200 alt="nJcx's Blog">
          </a>
        </div>
        <div class="col-sm-8">
          <h1 class="title">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="https://www.njcx.bid">nJcx's Blog</a></h1>
          <p class="text-muted">十年生死两茫茫，写程序，到天亮。相顾无言，惟有泪千行</p>
          <ul class="list-inline">
                    <li class="list-inline-item">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="https://www.zhihu.com/people/njcxs" target="_blank">知乎</a></li>
                <li class="list-inline-item"><a href="https://www.facebook.com/nJcx1" target="_blank">FaceBook</a></li>
                <li class="list-inline-item"><a href="https://github.com/njcx" target="_blank">Github</a></li>
            <li class=" list-inline-item text-muted">|</li>
            <li class="list-inline-item"><a class="fa fa-github" href="https://github.com/njcx" target="_blank"></a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>Linux 运维常用命令总结
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2017-01-13T10:20:00+03:00">
        <i class="fa fa-clock-o"></i>
        Fri 13 January 2017
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://www.njcx.bid/category/linux.html">Linux</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="https://www.njcx.bid/author/njcx.html">nJcx</a>      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="https://www.njcx.bid/tag/linux.html">#Linux</a>      </li>
    </ul>
  </header>
  <div class="content">
    <h2>Linux 运维常用命令总结</h2>
<p>很多都是从网上收集的和自己总结的</p>
<ul>
<li>网卡绑定多IP</li>
</ul>
<p>ifconfig eth0:1 192.168.1.99 netmask 255.255.255.0</p>
<ul>
<li>设置DNS、网关</li>
</ul>
<p>echo "nameserver 202.16.53.68" &gt;&gt; /etc/resolv.conf
route add default gw 192.168.1.1</p>
<ul>
<li>查看系统版本</li>
</ul>
<p>lsb_release -a</p>
<p>cat /etc/issue</p>
<ul>
<li>查看系统信息</li>
</ul>
<p>uname -a</p>
<ul>
<li>查看物理CPU个数</li>
</ul>
<p>cat /proc/cpuinfo| grep "physical id"| sort| uniq| wc -l</p>
<ul>
<li>查看当前登录用户:</li>
</ul>
<p>root@debian:/home/njcx# who</p>
<p>njcx     :0           2017-05-21 08:11 (:0)</p>
<p>njcx     pts/0        2017-05-21 18:24 (:0.0)</p>
<p>第一列是用户名,
第二列是连接的终端,tty表示显示器,pts表示远程连接,
第三列是登陆时间,</p>
<ul>
<li>查看登录用户行为:
root@debian:/home/njcx# w</li>
</ul>
<p>18:32:52 up 10:21,  2 users,  load average: 0.74, 0.35, 0.23</p>
<p>USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</p>
<p>njcx     :0       :0               08:11   ?xdm?  38:14   0.31s x-session-manag</p>
<p>njcx     pts/0    :0.0             18:24    1.00s  0.09s  3.44s mate-terminal</p>
<p>users 表示当前系统登陆用户总数为2。</p>
<p>LOAD AVERAGE 与后面的数字一起表示系统在过去1，5，10分钟内的负载程度，数值越小，系统负载越轻。</p>
<p>从第二行开始构成一个表格，共有8个栏目，分别显示各个用户正在做的事情及该用户所占用的系统资料。</p>
<p>USER：显示登陆用户帐号名。用户重复登陆，该帐号也会重复出现。</p>
<p>TTY：用户登陆所用的终端。</p>
<p>FROM：显示用户在何处登陆系统。</p>
<p>LOGIN@：是LOGIN AT的意思，表示登陆进入系统的时间。</p>
<p>IDLE：用户空闲时间，从用户上一次任务结束后，开始记时。</p>
<p>JCPU：一终端代号来区分，表示在某段时间内，所有与该终端相关的进程任务所耗费的CPU时间。</p>
<p>PCPU：指WHAT域的任务执行后耗费的CPU时间。</p>
<p>WHAT：表示当前执行的任务</p>
<p>当登陆系统用户很多的时候，可以在W后面加上某个用户名，则会查看该用户执行任务的情况</p>
<ul>
<li>强制踢出登陆用户</li>
</ul>
<p>pkill -KILL -t pts/1</p>
<ul>
<li>tar命令</li>
</ul>
<p>tar.gz</p>
<p>压缩：tar -zcvf archive_name.tar.gz directory_to_compress</p>
<p>解压缩： tar -zxvf archive_name.tar.gz</p>
<p>tar.bz2</p>
<p>压缩  ： tar -jcvf test.tar.bz2 test</p>
<p>解压： tar -jxvf test.tar.bz2 </p>
<ul>
<li>将本地80端口的请求转发到8080端口，当前主机外网IP为202.96.85.46</li>
</ul>
<p>A PREROUTING -d 202.96.85.46 -p tcp -m tcp --dport 80 -j DNAT --to-destination 192.168.9.10:8080</p>
<ul>
<li>在11月份内，每天的早上6点到12点中，每隔2小时执行一次/usr/bin/httpd.sh</li>
</ul>
<p>crontab -e</p>
<p>0 6-12/2 * 11 * /usr/bin/httpd.sh</p>
<ul>
<li>查看占用端口8080的进程</li>
</ul>
<p>netstat -tnlp | grep 8080</p>
<p>lsof -i:8080</p>
<ul>
<li>在Shell环境下,如何查看远程Linux系统运行了多少时间?</li>
</ul>
<p>ssh user@被监控主机ip "uptime"</p>
<ul>
<li>查看CPU使用情况的命令</li>
</ul>
<p>""每5秒刷新一次，最右侧有CPU的占用率的数据</p>
<p>vmstat 5</p>
<p>""top 然后按Shift+P，按照进程处理器占用率排序
top</p>
<ul>
<li>查看磁盘空间占用情况</li>
</ul>
<p>df -hl</p>
<ul>
<li>查看内存使用情况的命令</li>
</ul>
<p>""用free命令查看内存使用情况</p>
<p>free -m</p>
<p>""top 然后按Shift+M, 按照进程内存占用率排序</p>
<p>top</p>
<ul>
<li>修复文件系统</li>
</ul>
<p>fsck –yt ext3 /</p>
<p>-t 指定文件系统</p>
<p>-y 对发现的问题自动回答yes</p>
<ul>
<li>read 命令5秒后自动退出</li>
</ul>
<p>read -t 5</p>
<ul>
<li>vi编辑器(涉及到修改，添加，查找)</li>
</ul>
<p>插入(insert)模式</p>
<p>i　　　　光标前插入</p>
<p>I　　　　光标行首插入</p>
<p>a　　　　光标后插入</p>
<p>A　　　　光标行尾插入</p>
<p>o　　　　光标所在行下插入一行，行首插入</p>
<p>O　　　　光标所在行上插入一行，行首插入</p>
<p>G　　　　移至最后一行行首</p>
<p>nG　　　　移至第n行行首</p>
<p>n+　　　　下移n行，行首</p>
<p>n-　　　　上移n行，行首</p>
<p>:/str/　　　　　　　　　　从当前往右移动到有str的地方</p>
<p>:?str?　　　　　　　　　　从当前往左移动到有str的地方</p>
<p>:s/str1/str2/　　　　　　将找到的第一个str1替换为str2　
　
:s/str2/str2/g　　　　　　将当前行找到的所有str1替换为str2</p>
<p>:n1,n2s/str1/str2/g　　　　将从n1行至n2行找到的所有的str1替换为str2</p>
<p>:1,.s/str1/str2/g　　　　　　将从第1行至当前行的所有str1替换为str2</p>
<p>:.,$s/str1/str2/g　　　　　　将从当前行至最后一行的所有str1替换为str2</p>
<ul>
<li>linux服务器之间相互复制文件</li>
</ul>
<p>copy 本地文件1.sh到远程192.168.9.10服务器的/data/目录下</p>
<p>scp /etc/1.sh king@192.168.9.10:/data/</p>
<p>copy远程192.168.9.10服务器/data/2.sh文件到本地/data/目录</p>
<p>scp king@192.168.9.10:/data/2.sh /data/</p>
<ul>
<li>如何查看目标主机192.168.0.1开放那些端口</li>
</ul>
<p>nmap -PS 192.168.0.1</p>
<ul>
<li>如何查看当前系统使用了那些库文件</li>
</ul>
<p>ldconfig -v</p>
<ul>
<li>如何查看网卡的驱动版本</li>
</ul>
<p>ethtool -i eth0</p>
<ul>
<li>使用tcpdump来监视主机192.168.0.1的tcp的80端口</li>
</ul>
<p>tcpdump tcp port 80 host 192.168.0.1                                               </p>
  </div>
</article>
<div id="cyReward" role="cylabs" data-use="reward" style="text-align:center;"></div>
<!--PC和WAP自适应版-->
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cysYUIjwy'; 
var conf = 'prod_71b5e53cad0d27b5ed44fa5219b069b5'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

<script type="text/javascript" charset="utf-8" src="https://changyan.itc.cn/js/lib/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="https://changyan.sohu.com/js/changyan.labs.https.js?appid=cysYUIjwy"></script>    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <ul class="col-sm-6 list-inline">
          <li class="list-inline-item"><a href="https://www.njcx.bid/authors.html">Authors</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/archives.html">Archives</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/categories.html">Categories</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/tags.html">Tags</a></li>
        </ul>
        <p class="col-sm-6 text-sm-right text-muted">
          本站由 <a href="https://github.com/getpelican/pelican" target="_blank">Pelican 生成</a> 后续 by <a href="https://github.com/njcx" target="_blank">nJcx</a>
        </p>
      </div>
    </div>
  </footer>
</body>

</html>