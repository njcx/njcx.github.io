<!DOCTYPE html>
<html lang="zh">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="google-site-verification" content="GgupatpoZgdqsBlxEZoMqGAy3aXAFtXIrYged3SB6EA" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>docker 常用命令记录 | nJcx's Blog
</title>
  <link rel="canonical" href="https://www.njcx.bid/posts/B4.html">


  <link rel="apple-touch-icon" href="https://www.njcx.bid/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://www.njcx.bid/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://www.njcx.bid/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://www.njcx.bid/manifest.json">
  <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/pygments/emacs.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/style.css">


<meta name="description" content="介绍一下docker常用命令，记录一下学习过程">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a34c7a96ae9745547c373575407c521f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <a href="https://www.njcx.bid">
            <img class="img-fluid" src=https://www.njcx.bid/images/profile.png width=200 height=200 alt="nJcx's Blog">
          </a>
        </div>
        <div class="col-sm-8">
          <h1 class="title">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="https://www.njcx.bid">nJcx's Blog</a></h1>
          <p class="text-muted">十年生死两茫茫，写程序，到天亮。相顾无言，惟有泪千行</p>
          <ul class="list-inline">
                    <li class="list-inline-item">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="https://www.zhihu.com/people/njcxs" target="_blank">知乎</a></li>
                <li class="list-inline-item"><a href="https://www.facebook.com/nJcx1" target="_blank">FaceBook</a></li>
                <li class="list-inline-item"><a href="https://github.com/njcx" target="_blank">Github</a></li>
            <li class=" list-inline-item text-muted">|</li>
            <li class="list-inline-item"><a class="fa fa-github" href="https://github.com/njcx" target="_blank"></a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>docker 常用命令记录
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2017-02-16T10:20:00+03:00">
        <i class="fa fa-clock-o"></i>
        Thu 16 February 2017
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://www.njcx.bid/category/linux.html">Linux</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="https://www.njcx.bid/author/njcx.html">nJcx</a>      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="https://www.njcx.bid/tag/docker.html">#docker</a>      </li>
    </ul>
  </header>
  <div class="content">
    <h4>查看docker信息（version、info）</h4>
<ul>
<li>查看docker版本  </li>
</ul>
<p>docker version </p>
<ul>
<li>显示docker系统的信息  </li>
</ul>
<p>docker info  </p>
<h4>对image的操作（search、pull、images、rmi、history）</h4>
<ul>
<li>检索image  </li>
</ul>
<p>docker search image_name  </p>
<ul>
<li>下载image </li>
</ul>
<p>docker pull image_name  </p>
<ul>
<li>列出镜像列表; -a, --all=false Show all images; --no-trunc=false Don't truncate output; -q, --quiet=false Only show numeric IDs  </li>
</ul>
<p>docker images  </p>
<ul>
<li>删除一个或者多个镜像; -f, --force=false Force; --no-prune=false Do not delete untagged parents  </li>
</ul>
<p>docker rmi image_name  </p>
<ul>
<li>显示一个镜像的历史; --no-trunc=false Don't truncate output; -q, --quiet=false Only show numeric IDs  </li>
</ul>
<p>docker history image_name </p>
<h4>启动容器（run）</h4>
<p>Docker容器可以理解为在沙盒中运行的进程。这个沙盒包含了该进程运行所必须的资源，包括文件系统、系统类库、shell 环境等等。但这个沙盒默认是不会运行任何程序的。你需要在沙盒中运行一个进程来启动某一个容器。这个进程是该容器的唯一进程，所以当该进程结束的时候，容器也会完全的停止。</p>
<ul>
<li>在容器中运行"echo"命令，输出"hello word"  </li>
</ul>
<p>docker run image_name echo "hello word"  </p>
<ul>
<li>交互式进入容器中 </li>
</ul>
<p>docker run -i -t image_name /bin/bash  </p>
<ul>
<li>在容器中安装新的程序  </li>
</ul>
<p>docker run image_name apt-get install -y app_name  </p>
<p>Note：  在执行apt-get 命令的时候，要带上-y参数。如果不指定-y参数的话，apt-get命令会进入交互模式，需要用户输入命令来进行确认，但在docker环境中是无法响应这种交互的。apt-get 命令执行完毕之后，容器就会停止，但对容器的改动不会丢失。</p>
<h4>查看容器（ps）</h4>
<ul>
<li>列出当前所有正在运行的container  </li>
</ul>
<p>docker ps  </p>
<ul>
<li>列出所有的container  </li>
</ul>
<p>docker ps -a  </p>
<ul>
<li>列出最近一次启动的container </li>
</ul>
<p>docker ps -l  </p>
<h4>保存对容器的修改（commit）</h4>
<p>当你对某一个容器做了修改之后（通过在容器中运行某一个命令），可以把对容器的修改保存下来，这样下次可以从保存后的最新状态运行该容器。</p>
<ul>
<li>保存对容器的修改; -a, --author="" Author; -m, --message="" Commit message  </li>
</ul>
<p>docker commit ID new_image_name  </p>
<p>Note：  image相当于类，Container相当于实例，不过可以动态给实例安装新软件，然后把这个container用commit命令固化成一个image。</p>
<h4>对容器的操作（rm、stop、start、kill、logs、diff、top、cp、restart、attach）</h4>
<ul>
<li>删除所有容器  </li>
</ul>
<p>docker rm <code>docker ps -a -q</code> </p>
<p>删除单个容器; -f, --force=false; -l, --link=false Remove the specified link and not the underlying container; -v, --volumes=false Remove the volumes associated to the container </p>
<p>docker rm Name/ID  </p>
<ul>
<li>停止、启动、杀死一个容器  </li>
</ul>
<p>docker stop Name/ID  </p>
<p>docker start Name/ID  </p>
<p>docker kill Name/ID  </p>
<ul>
<li>从一个容器中取日志; -f, --follow=false Follow log output; -t, --timestamps=false Show timestamps  </li>
</ul>
<p>docker logs Name/ID  </p>
<ul>
<li>列出一个容器里面被改变的文件或者目录，list列表会显示出三种事件，A 增加的，D 删除的，C 被改变的  </li>
</ul>
<p>docker diff Name/ID  </p>
<ul>
<li>显示一个运行的容器里面的进程信息  </li>
</ul>
<p>docker top Name/ID  </p>
<ul>
<li>从容器里面拷贝文件/目录到本地一个路径  </li>
</ul>
<p>docker cp Name:/container_path to_path  </p>
<p>docker cp ID:/container_path to_path  </p>
<ul>
<li>重启一个正在运行的容器; -t, --time=10 Number of seconds to try to stop for before killing the container, Default=10  </li>
</ul>
<p>docker restart Name/ID  </p>
<ul>
<li>附加到一个运行的容器上面; --no-stdin=false Do not attach stdin; --sig-proxy=true Proxify all received signal to the process  </li>
</ul>
<p>docker attach ID  </p>
<p>Note： attach命令允许你查看或者影响一个运行的容器。你可以在同一时间attach同一个容器。你也可以从一个容器中脱离出来，是从CTRL-C。</p>
<h4>保存和加载镜像（save、load）</h4>
<p>当需要把一台机器上的镜像迁移到另一台机器的时候，需要保存镜像与加载镜像。</p>
<ul>
<li>保存镜像到一个tar包; -o, --output="" Write to an file </li>
</ul>
<p>docker save image_name -o file_path  </p>
<ul>
<li>加载一个tar包格式的镜像; -i, --input="" Read from a tar archive file  </li>
</ul>
<p>docker load -i file_path  </p>
<ul>
<li>机器a  </li>
</ul>
<p>docker save image_name &gt; /home/save.tar  </p>
<p>使用scp将save.tar拷到机器b上，然后：  </p>
<p>docker load &lt; /home/save.tar  </p>
<h4>登录registry server（login）</h4>
<p>登陆registry server; -e, --email="" Email; -p, --password="" Password; -u, --username="" Username  </p>
<p>docker login  </p>
<h4>发布image（push）</h4>
<ul>
<li>发布docker镜像  </li>
</ul>
<p>docker push new_image_name  </p>
<h4>根据Dockerfile 构建出一个容器</h4>
<ul>
<li>
<p>build  </p>
<p>--no-cache=false Do not use cache when building the image  </p>
<p>-q, --quiet=false Suppress the verbose output generated by the containers  </p>
<p>--rm=true Remove intermediate containers after a successful build  </p>
<p>-t, --tag="" Repository name (and optionally a tag) to be applied to the resulting image in case of success  </p>
</li>
</ul>
<p>docker build -t image_name Dockerfile_path  </p>
  </div>
</article>
<div id="cyReward" role="cylabs" data-use="reward" style="text-align:center;"></div>
<!--PC和WAP自适应版-->
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cysYUIjwy'; 
var conf = 'prod_71b5e53cad0d27b5ed44fa5219b069b5'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

<script type="text/javascript" charset="utf-8" src="https://changyan.itc.cn/js/lib/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="https://changyan.sohu.com/js/changyan.labs.https.js?appid=cysYUIjwy"></script>    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <ul class="col-sm-6 list-inline">
          <li class="list-inline-item"><a href="https://www.njcx.bid/authors.html">Authors</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/archives.html">Archives</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/categories.html">Categories</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/tags.html">Tags</a></li>
        </ul>
        <p class="col-sm-6 text-sm-right text-muted">
          本站由 <a href="https://github.com/getpelican/pelican" target="_blank">Pelican 生成</a> 后续 by <a href="https://github.com/njcx" target="_blank">nJcx</a>
        </p>
      </div>
    </div>
  </footer>
</body>

</html>