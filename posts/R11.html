<!DOCTYPE html>
<html lang="zh">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="google-site-verification" content="GgupatpoZgdqsBlxEZoMqGAy3aXAFtXIrYged3SB6EA" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Etcd在HIDS-Agent配置管理和健康监测上的应用 | nJcx's Blog
</title>
  <link rel="canonical" href="https://www.njcx.bid/posts/R11.html">


  <link rel="apple-touch-icon" href="https://www.njcx.bid/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://www.njcx.bid/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://www.njcx.bid/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://www.njcx.bid/manifest.json">
  <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/pygments/emacs.min.css">
  <link rel="stylesheet" href="https://www.njcx.bid/theme/css/style.css">


<meta name="description" content="Etcd在HIDS-Agent配置管理和健康监测上的应用 ~">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a34c7a96ae9745547c373575407c521f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <a href="https://www.njcx.bid">
            <img class="img-fluid" src=https://www.njcx.bid/images/profile.png width=200 height=200 alt="nJcx's Blog">
          </a>
        </div>
        <div class="col-sm-8">
          <h1 class="title">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="https://www.njcx.bid">nJcx's Blog</a></h1>
          <p class="text-muted">十年生死两茫茫，写程序，到天亮。相顾无言，惟有泪千行</p>
          <ul class="list-inline">
                    <li class="list-inline-item">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="https://www.zhihu.com/people/njcxs" target="_blank">知乎</a></li>
                <li class="list-inline-item"><a href="https://www.facebook.com/nJcx1" target="_blank">FaceBook</a></li>
                <li class="list-inline-item"><a href="https://github.com/njcx" target="_blank">Github</a></li>
            <li class=" list-inline-item text-muted">|</li>
            <li class="list-inline-item"><a class="fa fa-github" href="https://github.com/njcx" target="_blank"></a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>Etcd在HIDS-Agent配置管理和健康监测上的应用
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2018-08-12T20:20:00+03:00">
        <i class="fa fa-clock-o"></i>
        Sun 12 August 2018
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://www.njcx.bid/category/an-quan.html">安全</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="https://www.njcx.bid/author/njcx.html">nJcx</a>      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="https://www.njcx.bid/tag/hids.html">#HIDS</a>      </li>
    </ul>
  </header>
  <div class="content">
    <h4>介绍</h4>
<p>etcd是CoreOS团队于2013年6月发起的开源项目，它的目标是构建一个高可用的分布式键值(key-value)数据库。etcd内部采用raft协议作为一致性算法，etcd基于Go语言实现。</p>
<p>etcd作为服务发现系统，有以下的特点：</p>
<ul>
<li>简单：安装配置简单，而且提供了HTTP API进行交互，使用也很简单</li>
<li>安全：支持SSL证书验证</li>
<li>快速：根据官方提供的benchmark数据，每个实例每秒1000+次写操作</li>
<li>可靠：采用raft算法，实现分布式系统数据的可用性和一致性</li>
</ul>
<p>etcd项目地址：https://github.com/etcd-io/etcd</p>
<p>下载地址： https://github.com/etcd-io/etcd/releases/download/v3.4.14/etcd-v3.4.14-linux-amd64.tar.gz</p>
<p>etcd 是许多其他项目的核心组件。最值得注意的是，它是 Kubernetes 的首要数据存储，也是容器编排的实际标准系统。使用 etcd， 云原生应用可以保持更为一致的运行时间，而且在个别服务器发生故障时也能正常工作。应用从 etcd 读取数据并写入到其中；通过分散配置数据，为节点配置提供冗余和弹性。</p>
<h4>Etcd应用场景</h4>
<p>etcd比较多的应用场景是用于服务发现，服务发现(Service Discovery)要解决的是分布式系统中最常见的问题之一，即在同一个分布式集群中的进程或服务如何才能找到对方并建立连接。</p>
<p>从本质上说，服务发现就是要了解集群中是否有进程在监听upd或者tcp端口，并且通过名字就可以进行查找和链接。</p>
<p>要解决服务发现的问题，需要下面三大支柱，缺一不可。</p>
<p>一个强一致性、高可用的服务存储目录。
基于Ralf算法的etcd天生就是这样一个强一致性、高可用的服务存储目录。</p>
<p>一种注册服务和健康服务健康状况的机制。
用户可以在etcd中注册服务，并且对注册的服务配置key TTL，定时保持服务的心跳以达到监控健康状态的效果。</p>
<p>一种查找和连接服务的机制。
通过在etcd指定的主题下注册的服务业能在对应的主题下查找到。</p>
<h4>Etcd vs Zookeeper</h4>
<p>提供配置共享和服务发现的系统比较多，其中最为大家熟知的是 Zookeeper，而 etcd 可以算得上是后起之秀了。在项目实现、一致性协议易理解性、运维、安全等多个维度上，etcd 相比 zookeeper 都占据优势。</p>
<p>本文选取 Zookeeper 作为典型代表与 etcd 进行比较，而不考虑 Consul 项目作为比较对象，原因为 Consul 的可靠性和稳定性还需要时间来验证（项目发起方自身服务并未使用Consul，自己都不用)。</p>
<ul>
<li>一致性协议： etcd 使用 Raft 协议，Zookeeper 使用 ZAB（类PAXOS协议），前者容易理解，方便工程实现；</li>
<li>运维方面：etcd 方便运维，Zookeeper 难以运维；</li>
<li>数据存储：etcd 多版本并发控制（MVCC）数据模型 ， 支持查询先前版本的键值对</li>
<li>项目活跃度：etcd 社区与开发活跃，Zookeeper 开发缓慢；</li>
<li>API：etcd 提供 HTTP+JSON, gRPC 接口，跨平台跨语言，Zookeeper 需要使用其客户端；
访问安全方面：etcd 支持 HTTPS 访问，Zookeeper 在这方面缺失；</li>
</ul>
<h4>Etcd vs Redis</h4>
<p>尽管etcd和redis都是键值存储，随着技术的演进，二者在功能上也有逐渐相似的趋势，但二者在许多方面都有很大区别。
etcd的爆火来源于Kubernetes用etcd做服务发现，而redis的兴起则来源于memcache缓存本身的局限性。
etcd的重点是利用raft算法做分布式一致性，强调各个节点之间的通信、同步，确保各节点数据和事务的一致性，使得服务发现工作更稳定；</p>
<p>redis也可以做主从同步和读写分离，但节点一致性强调的是数据，不是事务。redis的注册和发现只能通过pub和sub实现，安全性不能保证（断线重连之后不会将历史信息推送给客户端，需要自己做一个定时轮询），延时也比etcd v3高。</p>
<p>etcd v3的底层采用boltdb做存储，value直接持久化；redis是一个内存数据库，它的持久化方案有aof和rdb，在宕机时都或多或少会丢失数据。</p>
<h4>Etcd 集群的搭建</h4>
<p>一共3台机器：</p>
<p>CentOS7，Etcd-v3.4.14</p>
<ul>
<li>HOST_1=172.19.0.12</li>
<li>HOST_2=172.19.0.13</li>
<li>HOST_3=172.19.0.14</li>
</ul>
<p>先在所有机器上面执行</p>
<div class="highlight"><pre><span></span><span class="nv">TOKEN</span><span class="o">=</span>etcd-token-test-njcx
<span class="nv">CLUSTER_STATE</span><span class="o">=</span>new
<span class="nv">NAME_1</span><span class="o">=</span>machine-1
<span class="nv">NAME_2</span><span class="o">=</span>machine-2
<span class="nv">NAME_3</span><span class="o">=</span>machine-3
<span class="nv">HOST_1</span><span class="o">=</span><span class="m">172</span>.19.0.12
<span class="nv">HOST_2</span><span class="o">=</span><span class="m">172</span>.19.0.13
<span class="nv">HOST_3</span><span class="o">=</span><span class="m">172</span>.19.0.14
<span class="nv">CLUSTER</span><span class="o">=</span><span class="si">${</span><span class="nv">NAME_1</span><span class="si">}</span><span class="o">=</span>http://<span class="si">${</span><span class="nv">HOST_1</span><span class="si">}</span>:2380,<span class="si">${</span><span class="nv">NAME_2</span><span class="si">}</span><span class="o">=</span>http://<span class="si">${</span><span class="nv">HOST_2</span><span class="si">}</span>:2380,<span class="si">${</span><span class="nv">NAME_3</span><span class="si">}</span><span class="o">=</span>http://<span class="si">${</span><span class="nv">HOST_3</span><span class="si">}</span>:2380
mkdir -p /var/lib/etcd
<span class="nv">ETCD_DATA</span><span class="o">=</span>/var/lib/etcd
</pre></div>
<p>然后在HOST_1 执行</p>
<div class="highlight"><pre><span></span><span class="nv">THIS_NAME</span><span class="o">=</span><span class="si">${</span><span class="nv">NAME_1</span><span class="si">}</span>
<span class="nv">THIS_IP</span><span class="o">=</span><span class="si">${</span><span class="nv">HOST_1</span><span class="si">}</span>
etcd --data-dir<span class="o">=</span><span class="si">${</span><span class="nv">ETCD_DATA</span><span class="si">}</span> --name <span class="si">${</span><span class="nv">THIS_NAME</span><span class="si">}</span> <span class="se">\</span>
    --initial-advertise-peer-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2380 --listen-peer-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2380 <span class="se">\</span>
    --advertise-client-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2379 --listen-client-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2379 <span class="se">\</span>
    --initial-cluster <span class="si">${</span><span class="nv">CLUSTER</span><span class="si">}</span> <span class="se">\</span>
    --initial-cluster-state <span class="si">${</span><span class="nv">CLUSTER_STATE</span><span class="si">}</span> --initial-cluster-token <span class="si">${</span><span class="nv">TOKEN</span><span class="si">}</span>
</pre></div>
<p>然后在HOST_2 执行</p>
<div class="highlight"><pre><span></span><span class="nv">THIS_NAME</span><span class="o">=</span><span class="si">${</span><span class="nv">NAME_2</span><span class="si">}</span>
<span class="nv">THIS_IP</span><span class="o">=</span><span class="si">${</span><span class="nv">HOST_2</span><span class="si">}</span>
etcd --data-dir<span class="o">=</span><span class="si">${</span><span class="nv">ETCD_DATA</span><span class="si">}</span> --name <span class="si">${</span><span class="nv">THIS_NAME</span><span class="si">}</span> <span class="se">\</span>
    --initial-advertise-peer-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2380 --listen-peer-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2380 <span class="se">\</span>
    --advertise-client-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2379 --listen-client-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2379 <span class="se">\</span>
    --initial-cluster <span class="si">${</span><span class="nv">CLUSTER</span><span class="si">}</span> <span class="se">\</span>
    --initial-cluster-state <span class="si">${</span><span class="nv">CLUSTER_STATE</span><span class="si">}</span> --initial-cluster-token <span class="si">${</span><span class="nv">TOKEN</span><span class="si">}</span>
</pre></div>
<p>然后在HOST_3 执行</p>
<div class="highlight"><pre><span></span><span class="nv">THIS_NAME</span><span class="o">=</span><span class="si">${</span><span class="nv">NAME_3</span><span class="si">}</span>
<span class="nv">THIS_IP</span><span class="o">=</span><span class="si">${</span><span class="nv">HOST_3</span><span class="si">}</span>
etcd --data-dir<span class="o">=</span><span class="si">${</span><span class="nv">ETCD_DATA</span><span class="si">}</span> --name <span class="si">${</span><span class="nv">THIS_NAME</span><span class="si">}</span> <span class="se">\</span>
    --initial-advertise-peer-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2380 --listen-peer-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2380 <span class="se">\</span>
    --advertise-client-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2379 --listen-client-urls http://<span class="si">${</span><span class="nv">THIS_IP</span><span class="si">}</span>:2379 <span class="se">\</span>
    --initial-cluster <span class="si">${</span><span class="nv">CLUSTER</span><span class="si">}</span> <span class="se">\</span>
    --initial-cluster-state <span class="si">${</span><span class="nv">CLUSTER_STATE</span><span class="si">}</span> --initial-cluster-token <span class="si">${</span><span class="nv">TOKEN</span><span class="si">}</span>
</pre></div>
<p>然后，在任何一个机器上面</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ETCDCTL_API</span><span class="o">=</span><span class="m">3</span>
<span class="nv">HOST_1</span><span class="o">=</span><span class="m">172</span>.19.0.12
<span class="nv">HOST_2</span><span class="o">=</span><span class="m">172</span>.19.0.13
<span class="nv">HOST_3</span><span class="o">=</span><span class="m">172</span>.19.0.14
<span class="nv">ENDPOINTS</span><span class="o">=</span><span class="nv">$HOST_1</span>:2379,<span class="nv">$HOST_2</span>:2379,<span class="nv">$HOST_3</span>:2379
</pre></div>
<div class="highlight"><pre><span></span>./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> member list
8e9e05c52164694d, started, default, http://localhost:2380, http://0.0.0.0:2379, <span class="nb">false</span>
</pre></div>
<p>put 和get操作</p>
<div class="highlight"><pre><span></span>./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put web1 value1
OK
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put web2 value2
OK
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put web3 value3
OK
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> get web3
web3
value3
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> get web --prefix
web1
value1
web2
value2
web3
value3
</pre></div>
<p>删除操作</p>
<div class="highlight"><pre><span></span>./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put key myvalue
OK
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> del key
<span class="m">1</span>
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put k1 value1
OK
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put k2 value2
OK
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> del k --prefix
<span class="m">1</span>
</pre></div>
<p>监听key的变化</p>
<div class="highlight"><pre><span></span>./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> watch stock1
PUT
stock1
<span class="m">1000</span>

./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put stock1 <span class="m">1000</span>
ok
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> watch stock --prefix
PUT
stock1
<span class="m">10</span>
PUT
stock2
<span class="m">20</span>

./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put stock1 <span class="m">10</span>
ok
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put stock2 <span class="m">20</span>
ok
</pre></div>
<p>TTL</p>
<div class="highlight"><pre><span></span>./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> lease grant <span class="m">30</span>
<span class="c1"># lease 2be7547fbc6a5afa granted with TTL(30s)</span>
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put sample value --lease<span class="o">=</span>2be7547fbc6a5afa
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> get sample
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> lease keep-alive 2be7547fbc6a5afa      <span class="c1">#到期自动续期，会阻塞</span>
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> lease revoke 2be7547fbc6a5afa          <span class="c1">#直接销毁</span>
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> get sample
</pre></div>
<p>事务写</p>
<div class="highlight"><pre><span></span>./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> put user1 bad
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> txn --interactive
compares:
value<span class="o">(</span><span class="s2">"user1"</span><span class="o">)</span> <span class="o">=</span> <span class="s2">"bad"</span>  

success requests <span class="o">(</span>get, put, delete<span class="o">)</span>:
del user1  

failure requests <span class="o">(</span>get, put, delete<span class="o">)</span>:
put user1 good
</pre></div>
<p>认证</p>
<div class="highlight"><pre><span></span>./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> role add root                                 <span class="c1">#创建角色root</span>
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> role grant-permission root readwrite  foo     <span class="c1">#只给foo读写权限（foo是key）</span>
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> role get root
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> user add root                                 <span class="c1">#创建用户root</span>
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> user grant-role root root                     <span class="c1">#把用户添加到root 角色里面</span>
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> user get root
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> auth <span class="nb">enable</span>                                   <span class="c1">#激活认证</span>
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> --user<span class="o">=</span>root:123 put foo bar
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> get foo
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> --user<span class="o">=</span>root:123 get foo
./etcdctl --endpoints<span class="o">=</span><span class="si">${</span><span class="nv">ENDPOINTS</span><span class="si">}</span> --user<span class="o">=</span>root:123 get foo1
</pre></div>
<p>分布式锁</p>
<div class="highlight"><pre><span></span>./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> lock mutex1
<span class="c1"># 启动另一个shell，上面会退出</span>
./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> lock mutex1
</pre></div>
<p>查看etcd集群状态</p>
<div class="highlight"><pre><span></span>./etcdctl --write-out<span class="o">=</span>table --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> endpoint status       <span class="c1">#查看集群状态</span>

./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> endpoint health                         <span class="c1">#查看节点健康状态</span>
</pre></div>
<p>备份与恢复</p>
<p>只能从一个etcd节点请求快照，因此--endpoints标志应仅包含一个端点。</p>
<div class="highlight"><pre><span></span><span class="nv">ENDPOINTS</span><span class="o">=</span><span class="nv">$HOST_1</span>:2379

./etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> snapshot save my.db

./etcdctl snapshot restore my.db -data-dir /var/lib/etcd
</pre></div>
<h4>Etcd在HIDS-Agent配置管理和健康监测上的应用</h4>
  </div>
</article>
<div id="cyReward" role="cylabs" data-use="reward" style="text-align:center;"></div>
<!--PC和WAP自适应版-->
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cysYUIjwy'; 
var conf = 'prod_71b5e53cad0d27b5ed44fa5219b069b5'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

<script type="text/javascript" charset="utf-8" src="https://changyan.itc.cn/js/lib/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="https://changyan.sohu.com/js/changyan.labs.https.js?appid=cysYUIjwy"></script>    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <ul class="col-sm-6 list-inline">
          <li class="list-inline-item"><a href="https://www.njcx.bid/authors.html">Authors</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/archives.html">Archives</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/categories.html">Categories</a></li>
          <li class="list-inline-item"><a href="https://www.njcx.bid/tags.html">Tags</a></li>
        </ul>
        <p class="col-sm-6 text-sm-right text-muted">
          本站由 <a href="https://github.com/getpelican/pelican" target="_blank">Pelican 生成</a> 后续 by <a href="https://github.com/njcx" target="_blank">nJcx</a>
        </p>
      </div>
    </div>
  </footer>
</body>

</html>